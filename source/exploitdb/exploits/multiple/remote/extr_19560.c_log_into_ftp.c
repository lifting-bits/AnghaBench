#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */
typedef  struct TYPE_7__   TYPE_4__ ;
typedef  struct TYPE_6__   TYPE_2__ ;
typedef  struct TYPE_5__   TYPE_1__ ;

/* Type definitions */
struct TYPE_7__ {int /*<<< orphan*/  header; } ;
struct TYPE_6__ {char* desc; scalar_t__ banner; } ;
struct TYPE_5__ {int /*<<< orphan*/  cwd; int /*<<< orphan*/  pass; int /*<<< orphan*/  user; } ;

/* Variables and functions */
 scalar_t__ cwd (int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  debug ; 
 int /*<<< orphan*/  err (int /*<<< orphan*/ ,char*) ; 
 char* getmsg (char*) ; 
 int /*<<< orphan*/  getpwd () ; 
 TYPE_4__ hostinf ; 
 int /*<<< orphan*/  offset_selected ; 
 int /*<<< orphan*/  printf (char*,char*) ; 
 int /*<<< orphan*/  putserv (char*,int /*<<< orphan*/ ) ; 
 TYPE_2__* spdata ; 
 TYPE_2__* sptr ; 
 scalar_t__ strlen (int /*<<< orphan*/ ) ; 
 scalar_t__ strncmp (char*,char*,int) ; 
 scalar_t__ strstr (char*,scalar_t__) ; 
 TYPE_1__ tesopt ; 
 int /*<<< orphan*/  xstrdup (char*) ; 

void
log_into_ftp (void)
{
        char    *line;
        char    foundmatch=0;

        line = getmsg ("220 ");
        hostinf.header = xstrdup (line);

        if (!debug)
            printf("%s", line);
        if (!offset_selected) {
            for (sptr = spdata ; sptr->banner ; ++sptr) {
                if (strstr(line, sptr->banner)) {
                    foundmatch=1;
                    break;
                }
            }
            if (!foundmatch)
                err(0, "No offset selected, and no matching banner found!");
        }

        printf ("Using offsets from: %s\n", sptr->desc);

        putserv ("USER %s\n", tesopt.user);
        getmsg ("331 ");
        putserv ("PASS %s\n", tesopt.pass);
        line = getmsg ("230 ");
        if (strncmp ("5", line, 1) == 0)
                err (0, "login not accepted!\n");

        if (strlen (tesopt.cwd) > 0) {
                if (cwd (tesopt.cwd) == 0) { 
                        err (0, "initial CWD failed.");
                }
        }

        getpwd ();

        return;
}