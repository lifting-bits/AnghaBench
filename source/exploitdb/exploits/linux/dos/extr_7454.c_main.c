#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */
typedef  struct TYPE_4__   TYPE_2__ ;
typedef  struct TYPE_3__   TYPE_1__ ;

/* Type definitions */
struct TYPE_4__ {void* traffic_class; } ;
struct TYPE_3__ {void* traffic_class; } ;
struct sockaddr_atmsvc {int /*<<< orphan*/  sas_family; int /*<<< orphan*/  aal; TYPE_2__ txtp; TYPE_1__ rxtp; } ;
struct sockaddr {int dummy; } ;
struct atm_qos {int /*<<< orphan*/  sas_family; int /*<<< orphan*/  aal; TYPE_2__ txtp; TYPE_1__ rxtp; } ;
typedef  int /*<<< orphan*/  dj ;
typedef  int /*<<< orphan*/  addr ;

/* Variables and functions */
 int /*<<< orphan*/  AF_ATMSVC ; 
 int /*<<< orphan*/  ATM ; 
 int /*<<< orphan*/  ATM_NO_AAL ; 
 void* ATM_UBR ; 
 int NUM_CPUS ; 
 int /*<<< orphan*/  O_RDONLY ; 
 int /*<<< orphan*/  PF_ATMSVC ; 
 int /*<<< orphan*/  SOCK_DGRAM ; 
 int /*<<< orphan*/  SOL_ATM ; 
 int /*<<< orphan*/  SO_ATMQOS ; 
 int /*<<< orphan*/  bind (int,struct sockaddr*,int) ; 
 int /*<<< orphan*/  close (int) ; 
 scalar_t__ fork () ; 
 int /*<<< orphan*/  listen (int,int) ; 
 int /*<<< orphan*/  memset (struct sockaddr_atmsvc*,int /*<<< orphan*/ ,int) ; 
 int open (int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  printf (char*) ; 
 int read (int,char**,int) ; 
 int setsockopt (int,int /*<<< orphan*/ ,int /*<<< orphan*/ ,struct sockaddr_atmsvc*,int) ; 
 int socket (int /*<<< orphan*/ ,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 

int                           
main(void)                    
{                             
    char *err, adurit[2000];  
    int i, ret, sock, proc;   
    struct atm_qos dj;        
    struct sockaddr_atmsvc addr;
                               
                               
                               
    sock = socket(PF_ATMSVC, SOCK_DGRAM, 0);
                                           
                                           
    memset(&dj, 0, sizeof(dj));            
    dj.rxtp.traffic_class = ATM_UBR;       
    dj.txtp.traffic_class = ATM_UBR;       
    dj.aal = ATM_NO_AAL;                   
                                           

    ret = setsockopt(sock, SOL_ATM, SO_ATMQOS, &dj, sizeof(dj));
    if (ret == -1) {
        printf("failed !\n");
        return 1;
    }
    memset(&addr, 0, sizeof(addr));
    addr.sas_family = AF_ATMSVC;
 
    bind(sock, (struct sockaddr *) &addr, sizeof(addr));
 
    listen(sock, 10);
    listen(sock, 10);

    for (i = 1; i < NUM_CPUS; ++i) {
        if (fork() != 0) {
            break;
        }
    }
    proc = open(ATM, O_RDONLY);
    ret = read(proc, &adurit, 2000);
    close(proc);

    return 0;
}