#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */
typedef  struct TYPE_4__   TYPE_2__ ;
typedef  struct TYPE_3__   TYPE_1__ ;

/* Type definitions */
struct stat {int dummy; } ;
struct TYPE_3__ {int nbytes; char* buf; long long offset; } ;
struct TYPE_4__ {TYPE_1__ c; } ;
struct iocb {TYPE_2__ u; } ;
struct io_event {int /*<<< orphan*/  res; struct iocb* obj; } ;

/* Variables and functions */
 int io_getevents (int /*<<< orphan*/ ,int,int,struct io_event*,int /*<<< orphan*/ ) ; 
 int /*<<< orphan*/  io_prep_pread (struct iocb*,int,char*,int,int) ; 
 int io_submit (int /*<<< orphan*/ ,int,struct iocb**) ; 
 int /*<<< orphan*/  myctx ; 
 int /*<<< orphan*/  perror (char*) ; 
 int /*<<< orphan*/  printf (char*,int,long long,int /*<<< orphan*/ ) ; 

int do_aio_direct_read(int fd, char *iobuf, int offset, int size) 
{ 
struct iocb myiocb; 
struct iocb *iocbp = &myiocb; 
int ret; 
struct io_event e; 
struct stat s; 


io_prep_pread(&myiocb, fd, iobuf, size, offset); 
if ((ret = io_submit(myctx, 1, &iocbp)) != 1) { 
perror("io_submit"); 
return ret; 
} 


ret = io_getevents(myctx, 1, 1, &e, 0); 


if (ret) { 
struct iocb *iocb = e.obj; 
int iosize = iocb->u.c.nbytes; 
char *buf = iocb->u.c.buf; 
long long loffset = iocb->u.c.offset; 


printf("AIO read of %d at offset %lld returned %d\n", 
iosize, loffset, e.res); 
} 


return ret; 



}