#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */

/* Variables and functions */
#define  CMD_IDT 132 
#define  CMD_PHYS 131 
#define  CMD_PID 130 
#define  CMD_SEARCH 129 
#define  CMD_VIRT 128 
 int /*<<< orphan*/  debug1 (char*,char*,char*,...) ; 
 char* g_addr ; 
 int g_cmd ; 
 char* g_dir ; 
 char* g_file ; 
 char* g_length ; 
 int /*<<< orphan*/  g_num ; 
 char* g_offset ; 
 int /*<<< orphan*/  g_pid ; 
 char* g_string ; 
 int parse_cmd (char*) ; 
 int /*<<< orphan*/  parse_u (char*,int,int /*<<< orphan*/ *) ; 
 int /*<<< orphan*/  parse_ul (char*,int,char**) ; 

__attribute__((used)) static bool parse_args(int argc, char **argv) {
	if (argc < 2)
		return false;

	g_cmd = parse_cmd(argv[1]);

	switch (g_cmd) {
	case CMD_IDT:
		if (argc > 3)
			return false;
		if (argc >= 3 && !parse_u(argv[2], 10, &g_num))
			return false;
		return true;
	case CMD_PID:
		if (argc != 4)
			return false;
		if (!parse_u(argv[2], 10, &g_pid))
			return false;
		if (g_pid <= 0)
			return false;
		g_dir = argv[3];	
		debug1("CMD_PID %u %s\n", g_pid, g_dir);
		return true;
	case CMD_VIRT:
		if (argc < 4 || argc > 5)
			return false;
		if (!parse_ul(argv[2], 16, &g_addr))
			return false;
		if (!parse_ul(argv[3], 16, &g_length))
			return false;
		if (argc == 5)
			g_file = argv[4];
		debug1("CMD_VIRT %016lx %016lx %s\n", g_addr,
				g_length, g_file ? g_file : "NULL");
		return true;
	case CMD_PHYS:
		if (argc < 4 || argc > 5)
			return false;
		if (!parse_ul(argv[2], 16, &g_offset))
			return false;
		if (!parse_ul(argv[3], 16, &g_length))
			return false;
		if (argc == 5)
			g_file = argv[4];
		debug1("CMD_PHYS %016lx %016lx %s\n", g_offset,
				g_length, g_file ? g_file : "NULL");
		return true;
	case CMD_SEARCH:
		if (argc < 3 || argc > 5)
			return false;
		g_string = argv[2];
		if (argc >= 4 && !parse_ul(argv[3], 16, &g_offset))
			return false;
		if (argc >= 5 && !parse_ul(argv[4], 16, &g_length))
			return false;
		debug1("CMD_SEARCH <%s> %016lx %016lx\n",
				g_string, g_offset, g_length);
		return true;
	default:
		return false;
	}

	return true;
}