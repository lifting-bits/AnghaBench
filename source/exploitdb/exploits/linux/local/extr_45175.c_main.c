#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */

/* Variables and functions */
 int CMD_IDT ; 
#define  CMD_PHYS 131 
#define  CMD_PID 130 
#define  CMD_SEARCH 129 
#define  CMD_VIRT 128 
 int /*<<< orphan*/  EXIT_FAILURE ; 
 int EXIT_SUCCESS ; 
 scalar_t__ PAGE_SIZE ; 
 int /*<<< orphan*/  arbitrary_read_init () ; 
 int /*<<< orphan*/  assert (int) ; 
 int /*<<< orphan*/  exit (int /*<<< orphan*/ ) ; 
 int g_cmd ; 
 int /*<<< orphan*/  g_pid ; 
 scalar_t__ getpagesize () ; 
 int /*<<< orphan*/  getpid () ; 
 int /*<<< orphan*/  handle_cmd_idt () ; 
 int /*<<< orphan*/  handle_cmd_phys () ; 
 int /*<<< orphan*/  handle_cmd_pid () ; 
 int /*<<< orphan*/  handle_cmd_search () ; 
 int /*<<< orphan*/  handle_cmd_virt () ; 
 int /*<<< orphan*/  parse_args (int,char**) ; 
 int /*<<< orphan*/  physmap_init () ; 
 int /*<<< orphan*/  print_usage (char*) ; 
 int /*<<< orphan*/  pts_init (int /*<<< orphan*/ ) ; 

int main(int argc, char **argv) {
	assert(getpagesize() == PAGE_SIZE);

	if (!parse_args(argc, argv)) {
		print_usage(argv[0]);
		exit(EXIT_FAILURE);
	}

	arbitrary_read_init();

	if (g_cmd == CMD_IDT) {
		handle_cmd_idt();
		return EXIT_SUCCESS;
	}

	physmap_init();

	switch (g_cmd) {
	case CMD_VIRT:
		pts_init(getpid());
		handle_cmd_virt();
		break;
	case CMD_PHYS:
		pts_init(0);
		handle_cmd_phys();
		break;
	case CMD_SEARCH:
		pts_init(0);
		handle_cmd_search();
		break;
	case CMD_PID:
		pts_init(g_pid);
		handle_cmd_pid();
		break;
	}

	return EXIT_SUCCESS;
}